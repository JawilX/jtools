import{_ as De}from"./BaseTitle.vue_vue_type_script_setup_true_lang-d1e9ebd9.js";import{l as ye,o as de,d as q,j as _e,q as N,w as F,y as we,h as E,at as xe,n as L,x as Pe,au as je,r as Ae,R as he,U as $,W as G,X as b,Y as w,Z as T,_ as B,a1 as Ee,$ as x,aq as Se,F as Le,ar as $e,a2 as j,as as Me,av as Fe,a0 as He}from"./index-bc9287d3.js";import{a as fe,d as Ie}from"./index-4ac65761.js";import{u as Ne}from"./Popover-7c697f90.js";import{a as Ve,_ as We}from"./Upload-804c4955.js";import{_ as Xe}from"./Space-c5a72ec5.js";import{_ as Ge}from"./Table-8ef7fc23.js";import"./headers-159fcd27.js";import"./Follower-a5ad2d03.js";import"./Eye-d3da929b.js";import"./Add-af293b0b.js";const Ye=ye("p",`
 box-sizing: border-box;
 transition: color .3s var(--n-bezier);
 margin: var(--n-margin);
 font-size: var(--n-font-size);
 line-height: var(--n-line-height);
 color: var(--n-text-color);
`,[de("&:first-child","margin-top: 0;"),de("&:last-child","margin-bottom: 0;")]),qe=Object.assign(Object.assign({},N.props),{depth:[String,Number]}),Ke=q({name:"P",props:qe,setup(n){const{mergedClsPrefixRef:e,inlineThemeDisabled:t}=_e(n),r=N("Typography","-p",Ye,xe,n,e),i=F(()=>{const{depth:c}=n,o=c||"1",{common:{cubicBezierEaseInOut:s},self:{pFontSize:u,pLineHeight:d,pMargin:h,pTextColor:g,[`pTextColor${o}Depth`]:m}}=r.value;return{"--n-bezier":s,"--n-font-size":u,"--n-line-height":d,"--n-margin":h,"--n-text-color":c===void 0?g:m}}),a=t?we("p",F(()=>`${n.depth||""}`),i,n):void 0;return{mergedClsPrefix:e,cssVars:t?void 0:i,themeClass:a==null?void 0:a.themeClass,onRender:a==null?void 0:a.onRender}},render(){var n;return(n=this.onRender)===null||n===void 0||n.call(this),E("p",{class:[`${this.mergedClsPrefix}-p`,this.themeClass],style:this.cssVars},this.$slots)}}),Ze=ye("text",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
`,[L("strong",`
 font-weight: var(--n-font-weight-strong);
 `),L("italic",{fontStyle:"italic"}),L("underline",{textDecoration:"underline"}),L("code",`
 line-height: 1.4;
 display: inline-block;
 font-family: var(--n-font-famliy-mono);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 box-sizing: border-box;
 padding: .05em .35em 0 .35em;
 border-radius: var(--n-code-border-radius);
 font-size: .9em;
 color: var(--n-code-text-color);
 background-color: var(--n-code-color);
 border: var(--n-code-border);
 `)]),Je=Object.assign(Object.assign({},N.props),{code:Boolean,type:{type:String,default:"default"},delete:Boolean,strong:Boolean,italic:Boolean,underline:Boolean,depth:[String,Number],tag:String,as:{type:String,validator:()=>!0,default:void 0}}),Qe=q({name:"Text",props:Je,setup(n){const{mergedClsPrefixRef:e,inlineThemeDisabled:t}=_e(n),r=N("Typography","-text",Ze,xe,n,e),i=F(()=>{const{depth:c,type:o}=n,s=o==="default"?c===void 0?"textColor":`textColor${c}Depth`:Pe("textColor",o),{common:{fontWeightStrong:u,fontFamilyMono:d,cubicBezierEaseInOut:h},self:{codeTextColor:g,codeBorderRadius:m,codeColor:l,codeBorder:v,[s]:f}}=r.value;return{"--n-bezier":h,"--n-text-color":f,"--n-font-weight-strong":u,"--n-font-famliy-mono":d,"--n-code-border-radius":m,"--n-code-text-color":g,"--n-code-color":l,"--n-code-border":v}}),a=t?we("text",F(()=>`${n.type[0]}${n.depth||""}`),i,n):void 0;return{mergedClsPrefix:e,compitableTag:Ne(n,["as","tag"]),cssVars:t?void 0:i,themeClass:a==null?void 0:a.themeClass,onRender:a==null?void 0:a.onRender}},render(){var n,e,t;const{mergedClsPrefix:r}=this;(n=this.onRender)===null||n===void 0||n.call(this);const i=[`${r}-text`,this.themeClass,{[`${r}-text--code`]:this.code,[`${r}-text--delete`]:this.delete,[`${r}-text--strong`]:this.strong,[`${r}-text--italic`]:this.italic,[`${r}-text--underline`]:this.underline}],a=(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e);return this.code?E("code",{class:i,style:this.cssVars},this.delete?E("del",null,a):a):this.delete?E("del",{class:i,style:this.cssVars},a):E(this.compitableTag||"span",{class:i,style:this.cssVars},a)}});var Be={};Object.defineProperty(Be,"__esModule",{value:!0});const S=je,et={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 28 28"},tt=(0,S.createElementVNode)("g",{fill:"none"},[(0,S.createElementVNode)("path",{d:"M14.5 13V3.754a.75.75 0 0 0-1.5 0V13H3.754a.75.75 0 0 0 0 1.5H13v9.253a.75.75 0 0 0 1.5 0V14.5l9.25.003a.75.75 0 0 0 0-1.5L14.5 13z",fill:"currentColor"})],-1),rt=[tt];var nt=Be.default=(0,S.defineComponent)({name:"Add28Regular",render:function(e,t){return(0,S.openBlock)(),(0,S.createElementBlock)("svg",et,rt)}});/*!
 * Compressor.js v1.1.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-10-05T02:32:40.212Z
 */function me(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function M(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?me(Object(t),!0).forEach(function(r){ot(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):me(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function at(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function pe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function it(n,e,t){return e&&pe(n.prototype,e),t&&pe(n,t),n}function ot(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function H(){return H=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},H.apply(this,arguments)}var Ce={exports:{}};(function(n){typeof window>"u"||function(e){var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,r=e.Blob&&function(){try{return Boolean(new Blob)}catch{return!1}}(),i=r&&e.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),a=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,c=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,o=(r||a)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(s){var u,d,h,g,m,l,v,f,p;if(u=s.match(c),!u)throw new Error("invalid data URI");for(d=u[2]?u[1]:"text/plain"+(u[3]||";charset=US-ASCII"),h=!!u[4],g=s.slice(u[0].length),h?m=atob(g):m=decodeURIComponent(g),l=new ArrayBuffer(m.length),v=new Uint8Array(l),f=0;f<m.length;f+=1)v[f]=m.charCodeAt(f);return r?new Blob([i?v:l],{type:d}):(p=new a,p.append(l),p.getBlob(d))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(s,u,d){var h=this;setTimeout(function(){d&&t.toDataURL&&o?s(o(h.toDataURL(u,d))):s(h.mozGetAsFile("blob",u))})}:t.toDataURL&&o&&(t.msToBlob?t.toBlob=function(s,u,d){var h=this;setTimeout(function(){(u&&u!=="image/png"||d)&&t.toDataURL&&o?s(o(h.toDataURL(u,d))):s(h.msToBlob(u))})}:t.toBlob=function(s,u,d){var h=this;setTimeout(function(){s(o(h.toDataURL(u,d)))})})),n.exports?n.exports=o:e.dataURLtoBlob=o}(window)})(Ce);var st=Ce.exports,lt=function(e){return typeof Blob>"u"?!1:e instanceof Blob||Object.prototype.toString.call(e)==="[object Blob]"},ge={strict:!0,checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},ct=typeof window<"u"&&typeof window.document<"u",C=ct?window:{},I=function(e){return e>0&&e<1/0},ut=Array.prototype.slice;function dt(n){return Array.from?Array.from(n):ut.call(n)}var ht=/^image\/.+$/;function Y(n){return ht.test(n)}function ft(n){var e=Y(n)?n.substr(6):"";return e==="jpeg"&&(e="jpg"),".".concat(e)}var Re=String.fromCharCode;function mt(n,e,t){var r="",i;for(t+=e,i=e;i<t;i+=1)r+=Re(n.getUint8(i));return r}var pt=C.btoa;function gt(n,e){for(var t=[],r=8192,i=new Uint8Array(n);i.length>0;)t.push(Re.apply(null,dt(i.subarray(0,r)))),i=i.subarray(r);return"data:".concat(e,";base64,").concat(pt(t.join("")))}function vt(n){var e=new DataView(n),t;try{var r,i,a;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var c=e.byteLength,o=2;o+1<c;){if(e.getUint8(o)===255&&e.getUint8(o+1)===225){i=o;break}o+=1}if(i){var s=i+4,u=i+10;if(mt(e,s,4)==="Exif"){var d=e.getUint16(u);if(r=d===18761,(r||d===19789)&&e.getUint16(u+2,r)===42){var h=e.getUint32(u+4,r);h>=8&&(a=u+h)}}}if(a){var g=e.getUint16(a,r),m,l;for(l=0;l<g;l+=1)if(m=a+l*12+2,e.getUint16(m,r)===274){m+=8,t=e.getUint16(m,r),e.setUint16(m,1,r);break}}}catch{t=1}return t}function bt(n){var e=0,t=1,r=1;switch(n){case 2:t=-1;break;case 3:e=-180;break;case 4:r=-1;break;case 5:e=90,r=-1;break;case 6:e=90;break;case 7:e=90,t=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:t,scaleY:r}}var yt=/\.\d*(?:0|9){12}\d*$/;function ve(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return yt.test(n)?Math.round(n*e)/e:n}function A(n){var e=n.aspectRatio,t=n.height,r=n.width,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",a=I(r),c=I(t);if(a&&c){var o=t*e;(i==="contain"||i==="none")&&o>r||i==="cover"&&o<r?t=r/e:r=t*e}else a?t=r/e:c&&(r=t*e);return{width:r,height:t}}var _t=C.ArrayBuffer,be=C.FileReader,z=C.URL||C.webkitURL,wt=/\.\w+$/,xt=C.Compressor,Bt=function(){function n(e,t){at(this,n),this.file=e,this.image=new Image,this.options=M(M({},ge),t),this.aborted=!1,this.result=null,this.init()}return it(n,[{key:"init",value:function(){var t=this,r=this.file,i=this.options;if(!lt(r)){this.fail(new Error("The first argument must be a File or Blob object."));return}var a=r.type;if(!Y(a)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!z||!be){this.fail(new Error("The current browser does not support image compression."));return}if(_t||(i.checkOrientation=!1),z&&!i.checkOrientation)this.load({url:z.createObjectURL(r)});else{var c=new be,o=i.checkOrientation&&a==="image/jpeg";this.reader=c,c.onload=function(s){var u=s.target,d=u.result,h={};if(o){var g=vt(d);g>1||!z?(h.url=gt(d,a),g>1&&H(h,bt(g))):h.url=z.createObjectURL(r)}else h.url=d;t.load(h)},c.onabort=function(){t.fail(new Error("Aborted to read the image with FileReader."))},c.onerror=function(){t.fail(new Error("Failed to read the image with FileReader."))},c.onloadend=function(){t.reader=null},o?c.readAsArrayBuffer(r):c.readAsDataURL(r)}}},{key:"load",value:function(t){var r=this,i=this.file,a=this.image;a.onload=function(){r.draw(M(M({},t),{},{naturalWidth:a.naturalWidth,naturalHeight:a.naturalHeight}))},a.onabort=function(){r.fail(new Error("Aborted to load the image."))},a.onerror=function(){r.fail(new Error("Failed to load the image."))},C.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(C.navigator.userAgent)&&(a.crossOrigin="anonymous"),a.alt=i.name,a.src=t.url}},{key:"draw",value:function(t){var r=this,i=t.naturalWidth,a=t.naturalHeight,c=t.rotate,o=c===void 0?0:c,s=t.scaleX,u=s===void 0?1:s,d=t.scaleY,h=d===void 0?1:d,g=this.file,m=this.image,l=this.options,v=document.createElement("canvas"),f=v.getContext("2d"),p=Math.abs(o)%180===90,O=(l.resize==="contain"||l.resize==="cover")&&I(l.width)&&I(l.height),R=Math.max(l.maxWidth,0)||1/0,k=Math.max(l.maxHeight,0)||1/0,D=Math.max(l.minWidth,0)||0,P=Math.max(l.minHeight,0)||0,U=i/a,y=l.width,_=l.height;if(p){var K=[k,R];R=K[0],k=K[1];var Z=[P,D];D=Z[0],P=Z[1];var J=[_,y];y=J[0],_=J[1]}O&&(U=y/_);var Q=A({aspectRatio:U,width:R,height:k},"contain");R=Q.width,k=Q.height;var ee=A({aspectRatio:U,width:D,height:P},"cover");if(D=ee.width,P=ee.height,O){var te=A({aspectRatio:U,width:y,height:_},l.resize);y=te.width,_=te.height}else{var re=A({aspectRatio:U,width:y,height:_}),ne=re.width;y=ne===void 0?i:ne;var ae=re.height;_=ae===void 0?a:ae}y=Math.floor(ve(Math.min(Math.max(y,D),R))),_=Math.floor(ve(Math.min(Math.max(_,P),k)));var Te=-y/2,ze=-_/2,Ue=y,Oe=_,V=[];if(O){var ie=0,oe=0,W=i,X=a,se=A({aspectRatio:U,width:i,height:a},{contain:"cover",cover:"contain"}[l.resize]);W=se.width,X=se.height,ie=(i-W)/2,oe=(a-X)/2,V.push(ie,oe,W,X)}if(V.push(Te,ze,Ue,Oe),p){var le=[_,y];y=le[0],_=le[1]}v.width=y,v.height=_,Y(l.mimeType)||(l.mimeType=g.type);var ce="transparent";if(g.size>l.convertSize&&l.convertTypes.indexOf(l.mimeType)>=0&&(l.mimeType="image/jpeg"),l.mimeType==="image/jpeg"&&(ce="#fff"),f.fillStyle=ce,f.fillRect(0,0,y,_),l.beforeDraw&&l.beforeDraw.call(this,f,v),!this.aborted&&(f.save(),f.translate(y/2,_/2),f.rotate(o*Math.PI/180),f.scale(u,h),f.drawImage.apply(f,[m].concat(V)),f.restore(),l.drew&&l.drew.call(this,f,v),!this.aborted)){var ue=function(ke){r.aborted||r.done({naturalWidth:i,naturalHeight:a,result:ke})};v.toBlob?v.toBlob(ue,l.mimeType,l.quality):ue(st(v.toDataURL(l.mimeType,l.quality)))}}},{key:"done",value:function(t){var r=t.naturalWidth,i=t.naturalHeight,a=t.result,c=this.file,o=this.image,s=this.options;if(z&&!s.checkOrientation&&z.revokeObjectURL(o.src),a)if(s.strict&&a.size>c.size&&s.mimeType===c.type&&!(s.width>r||s.height>i||s.minWidth>r||s.minHeight>i||s.maxWidth<r||s.maxHeight<i))a=c;else{var u=new Date;a.lastModified=u.getTime(),a.lastModifiedDate=u,a.name=c.name,a.name&&a.type!==c.type&&(a.name=a.name.replace(wt,ft(a.type)))}else a=c;this.result=a,s.success&&s.success.call(this,a)}},{key:"fail",value:function(t){var r=this.options;if(r.error)r.error.call(this,t);else throw t}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=xt,n}},{key:"setDefaults",value:function(t){H(ge,t)}}]),n}();const Ct={class:"overflow-auto"},Rt=x("thead",null,[x("tr",null,[x("th",{width:"180"}," 文件名 "),x("th",{width:"100"}," 压缩前 "),x("th",{width:"100"}," 压缩后 "),x("th",{width:"100"}," 压缩率 "),x("th",{width:"100"}," 状态 "),x("th",{width:"120"}," 操作 ")])],-1),Tt={class:"!text-green-500"},Mt=q({__name:"TinyImg",setup(n){const e=Ae([]),t=he([]);function r(c){const{file:o}=c;return/image/.test(String(o.type))?Promise.resolve(!0):Promise.reject(new Error("请上传图片文件"))}function i(c){var u;const{file:o}=c,s=he({id:o.id,name:o.name,size:((u=o==null?void 0:o.file)==null?void 0:u.size)||0,compressedFile:null,compressedSize:0,status:"warning"});return t.push(s),new Bt(o.file,{quality:.6,success(d){s.compressedFile=d,s.compressedSize=d.size,s.status="success"}})}function a(c){e.value.splice(c,1),t.splice(c,1)}return(c,o)=>{const s=De,u=Fe,d=Qe,h=Ke,g=Ve,m=We,l=He,v=Xe,f=Ge;return $(),G("section",null,[b(s),b(m,{"file-list":T(e),"onUpdate:fileList":o[0]||(o[0]=p=>Ee(e)?e.value=p:null),"show-file-list":!1,accept:".jpg,.png,.jpeg,.gif",multiple:"",onBeforeUpload:r,onChange:i},{default:w(()=>[b(g,{class:"h-40 bg-white"},{default:w(()=>[b(u,{size:"20",depth:"3",class:"mt-8"},{default:w(()=>[b(T(nt))]),_:1}),b(h,null,{default:w(()=>[B(" 将文件拖到此处，或 "),b(d,{type:"info"},{default:w(()=>[B(" 点击上传 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["file-list"]),b(h,{depth:"3"},{default:w(()=>[B(" *只能上传 "),b(d,{type:"info"},{default:w(()=>[B(" jpg ")]),_:1}),B(" / "),b(d,{type:"info"},{default:w(()=>[B(" png ")]),_:1}),B(" / "),b(d,{type:"info"},{default:w(()=>[B(" jpeg ")]),_:1}),B(" / "),b(d,{type:"info"},{default:w(()=>[B(" gif ")]),_:1}),B(" 文件，且不超过 "),b(d,{type:"info"},{default:w(()=>[B(" 10MB ")]),_:1})]),_:1}),x("div",Ct,[T(t).length>0?($(),Se(f,{key:0,bordered:!1},{default:w(()=>[Rt,x("tbody",null,[($(!0),G(Le,null,$e(T(t),(p,O)=>($(),G("tr",{key:p.id},[x("td",null,j(p.name),1),x("td",null,j(T(fe)(p.size)),1),x("td",null,j(T(fe)(p.compressedSize)),1),x("td",Tt,j(-((1-p.compressedSize/p.size)*100).toFixed(2))+"% ",1),x("td",null,[b(d,{type:p.status},{default:w(()=>[B(j(p.status==="success"?"完成":"处理中..."),1)]),_:2},1032,["type"])]),x("td",null,[b(v,{wrap:!1},{default:w(()=>[b(l,{size:"small",secondary:"",type:"error",onClick:R=>a(O)},{default:w(()=>[B(" 删除 ")]),_:2},1032,["onClick"]),b(l,{size:"small",secondary:"",type:"primary",onClick:R=>T(Ie)(p.compressedFile,p.name)},{default:w(()=>[B(" 下载 ")]),_:2},1032,["onClick"])]),_:2},1024)])]))),128))])]),_:1})):Me("",!0)])])}}});export{Mt as default};
