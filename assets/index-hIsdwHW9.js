import{i as T,n as W,t as x,b as E,u as X,c as Y,a as H}from"./index-6-reuLOl.js";import{r as h,I as O,bG as C}from"./index-EZkD0_Zx.js";function I(e){var r;const a=H(e);return(r=a==null?void 0:a.$el)!=null?r:a}const w=T?window:void 0;function A(...e){let r,a,c,n;if(typeof e[0]=="string"||Array.isArray(e[0])?([a,c,n]=e,r=w):[r,a,c,n]=e,!r)return W;Array.isArray(a)||(a=[a]),Array.isArray(c)||(c=[c]);const s=[],i=()=>{s.forEach(u=>u()),s.length=0},v=(u,l,m,p)=>(u.addEventListener(l,m,p),()=>u.removeEventListener(l,m,p)),o=O(()=>[I(r),H(n)],([u,l])=>{if(i(),!u)return;const m=Y(l)?{...l}:l;s.push(...a.flatMap(p=>c.map(y=>v(u,p,y,m))))},{immediate:!0,flush:"post"}),f=()=>{o(),i()};return x(f),f}function V(e,r={}){const{immediate:a=!0,fpsLimit:c=void 0,window:n=w}=r,s=h(!1),i=c?1e3/c:null;let v=0,o=null;function f(m){if(!s.value||!n)return;const p=m-(v||m);if(i&&p<i){o=n.requestAnimationFrame(f);return}e({delta:p,timestamp:m}),v=m,o=n.requestAnimationFrame(f)}function u(){!s.value&&n&&(s.value=!0,o=n.requestAnimationFrame(f))}function l(){s.value=!1,o!=null&&n&&(n.cancelAnimationFrame(o),o=null)}return a&&u(),x(l),{isActive:C(s),pause:l,resume:u}}const _={page:e=>[e.pageX,e.pageY],client:e=>[e.clientX,e.clientY],screen:e=>[e.screenX,e.screenY],movement:e=>e instanceof Touch?null:[e.movementX,e.movementY]};function B(e={}){const{type:r="page",touch:a=!0,resetOnTouchEnds:c=!1,initialValue:n={x:0,y:0},window:s=w,target:i=s,scroll:v=!0,eventFilter:o}=e;let f=null;const u=h(n.x),l=h(n.y),m=h(null),p=typeof r=="function"?r:_[r],y=t=>{const d=p(t);f=t,d&&([u.value,l.value]=d,m.value="mouse")},F=t=>{if(t.touches.length>0){const d=p(t.touches[0]);d&&([u.value,l.value]=d,m.value="touch")}},g=()=>{if(!f||!s)return;const t=p(f);f instanceof MouseEvent&&t&&(u.value=t[0]+s.scrollX,l.value=t[1]+s.scrollY)},b=()=>{u.value=n.x,l.value=n.y},q=o?t=>o(()=>y(t),{}):t=>y(t),L=o?t=>o(()=>F(t),{}):t=>F(t),M=o?()=>o(()=>g(),{}):()=>g();if(i){const t={passive:!0};A(i,["mousemove","dragover"],q,t),a&&r!=="movement"&&(A(i,["touchstart","touchmove"],L,t),c&&A(i,"touchend",b,t)),v&&r==="page"&&A(s,"scroll",M,{passive:!0})}return{x:u,y:l,sourceType:m}}function D(e={}){const{controls:r=!1,offset:a=0,immediate:c=!0,interval:n="requestAnimationFrame",callback:s}=e,i=h(E()+a),v=()=>i.value=E()+a,o=s?()=>{v(),s(i.value)}:v,f=n==="requestAnimationFrame"?V(o,{immediate:c}):X(o,n,{immediate:c});return r?{timestamp:i,...f}:i}export{B as a,D as u};
